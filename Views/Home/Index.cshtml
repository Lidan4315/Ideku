@model Ideku.Models.Statistics.DashboardData
@{
    ViewData["Title"] = "Dashboard";
}

@section Styles {
    <link href="~/css/pages/dashboard.css" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
}

<div class="container-fluid">

    <div class="page-header mb-4">
        <h2 class="page-title text-gradient">
            <i class="bi bi-speedometer2 me-2"></i>Dashboard
        </h2>
        <p class="text-muted">Idea Management System Statistics</p>
    </div>

    @if (Model != null && Model.HasAlerts)
    {
        <div class="alert alert-warning alert-dismissible fade show mb-4" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>Attention!</strong> @Model.UrgentActingExpirations acting roles expiring within 3 days.
            <a href="@Url.Action("Index", "UserManagement")" class="alert-link">Review now</a>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (Model != null)
    {
        <!-- Filters Section - Two Separate Cards Side by Side -->
        <div class="row g-4 mb-4">
            <!-- Left Card: Date Filter -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-calendar-range me-2"></i>Submission Date Period
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row g-2">
                            <!-- Left Column: Shortcuts & Action Buttons -->
                            <div class="col-auto">
                                <div class="list-group list-group-sm date-shortcuts">
                                    <button type="button" class="list-group-item list-group-item-action date-filter-btn" data-filter="today">
                                        Today
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action date-filter-btn" data-filter="yesterday">
                                        Yesterday
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action date-filter-btn" data-filter="thisWeek">
                                        This Week
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action date-filter-btn" data-filter="lastWeek">
                                        Last Week
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action date-filter-btn" data-filter="thisMonth">
                                        This Month
                                    </button>
                                    <button type="button" class="list-group-item list-group-item-action date-filter-btn" data-filter="lastMonth">
                                        Last Month
                                    </button>

                                    <!-- Year Filter Dropdown -->
                                    <div class="mt-2 px-2">
                                        <label class="form-label small mb-1">Quick Select Year</label>
                                        <select id="filterYear" class="form-select form-select-sm mb-2">
                                            <option value="">Select Year</option>
                                        </select>
                                    </div>

                                    <!-- Custom Days Inputs -->
                                    <div class="mt-2 px-2">
                                        <div class="input-group input-group-sm mb-2">
                                            <input type="number" class="form-control" id="daysUpToToday" placeholder="1" min="1" value="1" style="max-width: 45px;">
                                            <span class="input-group-text text-nowrap">days up to today</span>
                                        </div>
                                        <div class="input-group input-group-sm mb-2">
                                            <input type="number" class="form-control" id="daysFromToday" placeholder="1" min="1" value="1" style="max-width: 45px;">
                                            <span class="input-group-text text-nowrap">days starting today</span>
                                        </div>
                                    </div>

                                    <!-- Action Buttons -->
                                    <div class="mt-2 px-2">
                                        <button type="button" class="btn btn-outline-secondary btn-sm w-100" id="clearDateFilter">
                                            <i class="bi bi-x-circle me-1"></i>Clear Date
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column: Calendar & Date Inputs -->
                            <div class="col date-inputs-calendar-col">
                                <!-- Date Range Display Inputs -->
                                <div class="d-flex gap-2 mb-3 date-inputs-row">
                                    <div class="flex-fill">
                                        <input type="text" class="form-control form-control-sm" id="startDateDisplay" placeholder="Select start date" readonly>
                                    </div>
                                    <div class="flex-fill">
                                        <input type="text" class="form-control form-control-sm" id="endDateDisplay" placeholder="Select end date" readonly>
                                    </div>
                                </div>

                                <!-- Calendar -->
                                <div class="calendar-container">
                                    <input type="text" id="dateRange" style="display: none;">
                                </div>

                                <!-- Hidden form for export -->
                                <form id="exportForm" method="get" action="@Url.Action("ExportDashboard", "Home")" style="display: none;">
                                    <input type="hidden" name="startDate" id="exportStartDate" />
                                    <input type="hidden" name="endDate" id="exportEndDate" />
                                    <input type="hidden" name="selectedDivision" id="exportDivision" />
                                    <input type="hidden" name="selectedStage" id="exportStage" />
                                    <input type="hidden" name="savingCostRange" id="exportSavingCost" />
                                    <input type="hidden" name="initiatorName" id="exportInitiatorName" />
                                    <input type="hidden" name="initiatorBadgeNumber" id="exportInitiatorBadgeNumber" />
                                    <input type="hidden" name="ideaId" id="exportIdeaId" />
                                    <input type="hidden" name="initiatorDivision" id="exportInitiatorDivision" />
                                    <input type="hidden" name="selectedStatus" id="exportStatus" />
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Card: Advanced Filters -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h6 class="mb-0">
                            <i class="bi bi-sliders me-2"></i>Advanced Filters
                        </h6>
                        <div id="filterBadgeContainer" style="display: none;">
                            <span class="badge bg-info" id="initiatorDivisionBadge" style="display: none;">
                                <i class="bi bi-funnel-fill me-1"></i>
                                <span id="initiatorDivisionBadgeText"></span>
                            </span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Left Column: Dropdown Filters -->
                            <div class="col-md-6">
                                <!-- Division Filter -->
                                <div class="mb-3">
                                    <label class="form-label small mb-1">Division</label>
                                    <select id="filterDivision" class="form-select form-select-sm">
                                        <option value="">All Divisions</option>
                                        @if (ViewBag.Divisions != null)
                                        {
                                            @foreach (var division in (IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>)ViewBag.Divisions)
                                            {
                                                if (!string.IsNullOrEmpty(division.Value))
                                                {
                                                    <option value="@division.Value"
                                                            selected="@(ViewBag.SelectedDivision == division.Value)">
                                                        @division.Text
                                                    </option>
                                                }
                                            }
                                        }
                                    </select>
                                </div>

                                <!-- Stage Filter -->
                                <div class="mb-3">
                                    <label class="form-label small mb-1">Stage</label>
                                    <select id="filterStage" class="form-select form-select-sm">
                                        <option value="">All Stages</option>
                                        @if (ViewBag.AvailableStages != null)
                                        {
                                            @foreach (var stage in (IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>)ViewBag.AvailableStages)
                                            {
                                                <option value="@stage.Value" selected="@(ViewBag.SelectedStage?.ToString() == stage.Value)">@stage.Text</option>
                                            }
                                        }
                                    </select>
                                </div>

                                <!-- Saving Cost Filter -->
                                <div class="mb-3">
                                    <label class="form-label small mb-1">Saving Cost</label>
                                    <select id="filterSavingCost" class="form-select form-select-sm">
                                        <option value="">All Saving Costs</option>
                                        <option value="lt20k" selected="@(ViewBag.SavingCostRange == "lt20k")">Less than $20,000</option>
                                        <option value="gte20k" selected="@(ViewBag.SavingCostRange == "gte20k")">More than $20,000</option>
                                    </select>
                                </div>

                                <!-- Initiator Division Filter -->
                                <div class="mb-3">
                                    <label class="form-label small mb-1">Initiator Division</label>
                                    <select id="filterInitiatorDivision" class="form-select form-select-sm">
                                        <option value="">All Divisions</option>
                                        @if (ViewBag.Divisions != null)
                                        {
                                            @foreach (var division in (IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>)ViewBag.Divisions)
                                            {
                                                if (!string.IsNullOrEmpty(division.Value))
                                                {
                                                    <option value="@division.Value">
                                                        @division.Text
                                                    </option>
                                                }
                                            }
                                        }
                                    </select>
                                </div>
                            </div>

                            <!-- Right Column: Text Input Filters -->
                            <div class="col-md-6">
                                <!-- Search Initiator Name Filter -->
                                <div class="mb-3">
                                    <label for="filterInitiatorName" class="form-label small mb-1">Search Initiator Name</label>
                                    <input type="text"
                                           class="form-control form-control-sm"
                                           id="filterInitiatorName"
                                           placeholder="Search by name...">
                                </div>

                                <!-- Search Initiator Badge Number Filter -->
                                <div class="mb-3">
                                    <label for="filterInitiatorBadgeNumber" class="form-label small mb-1">Search Initiator B/N</label>
                                    <input type="text"
                                           class="form-control form-control-sm"
                                           id="filterInitiatorBadgeNumber"
                                           placeholder="Search by badge number...">
                                </div>

                                <!-- Search Idea Id Filter -->
                                <div class="mb-3">
                                    <label for="filterIdeaId" class="form-label small mb-1">Search Idea Id</label>
                                    <input type="text"
                                           class="form-control form-control-sm"
                                           id="filterIdeaId"
                                           placeholder="Search by idea id...">
                                </div>

                                <!-- Status Filter -->
                                <div class="mb-3">
                                    <label class="form-label small mb-1">Status</label>
                                    <select id="filterStatus" class="form-select form-select-sm">
                                        <option value="">All Statuses</option>
                                        @if (ViewBag.AvailableStatuses != null)
                                        {
                                            @foreach (var status in (IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>)ViewBag.AvailableStatuses)
                                            {
                                                <option value="@status.Value">@status.Text</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="mt-3">
                            <button type="button" class="btn btn-outline-secondary btn-sm w-100 mb-2" id="clearAllFilters">
                                <i class="bi bi-x-circle me-2"></i>Clear All Filters
                            </button>
                            <button type="button" class="btn btn-success btn-sm w-100" id="exportDashboard">
                                <i class="bi bi-file-earmark-excel me-1"></i>Export to Excel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Cards & Status Chart Section -->
        <div class="row g-4 mb-4">
            <!-- Left Side: Status Pie Chart -->
            <div class="col-lg-5">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-pie-chart me-2"></i>Initiative by Stage
                        </h6>
                    </div>
                    <div class="card-body">
                        <!-- Pie Chart Container -->
                        <div class="pie-chart-wrapper">
                            <canvas id="statusChart" height="280"></canvas>
                        </div>
                        <!-- Custom Legend -->
                        <div id="statusChartLegend" class="pie-chart-legend"></div>
                    </div>
                </div>
            </div>

            <!-- Right Side: Statistics Cards -->
            <div class="col-lg-7">
                <div class="row g-3 h-100">
                    <!-- Total Ideas Card -->
                    <div class="col-md-6">
                        <div class="card stat-card stat-card-modern h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <div class="stat-icon bg-primary bg-opacity-10 text-primary">
                                        <i class="bi bi-lightbulb-fill"></i>
                                    </div>
                                    <div class="stat-trend text-success">
                                        <i class="bi bi-arrow-up"></i>
                                    </div>
                                </div>
                                <h6 class="text-muted mb-2 stat-label">Total Ideas</h6>
                                <h2 class="mb-0 stat-value">@Model.TotalIdeas</h2>
                            </div>
                        </div>
                    </div>

                    <!-- Total Saving Cost Card -->
                    <div class="col-md-6">
                        <div class="card stat-card stat-card-modern h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <div class="stat-icon bg-success bg-opacity-10 text-success">
                                        <i class="bi bi-currency-dollar"></i>
                                    </div>
                                    <div class="stat-trend text-success">
                                        <i class="bi bi-arrow-up"></i>
                                    </div>
                                </div>
                                <h6 class="text-muted mb-2 stat-label">Total Saving Cost</h6>
                                <h2 class="mb-0 stat-value">$ @Model.TotalSavingCost.ToString("N0")</h2>
                            </div>
                        </div>
                    </div>

                    <!-- Validated Saving Cost Card -->
                    <div class="col-md-12">
                        <div class="card stat-card stat-card-modern stat-card-wide">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="stat-icon bg-info bg-opacity-10 text-info me-3">
                                        <i class="bi bi-check-circle-fill"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="text-muted mb-2 stat-label">Validated Saving Cost</h6>
                                        <h2 class="mb-0 stat-value">$ @Model.ValidatedSavingCost.ToString("N0")</h2>
                                    </div>
                                    <div class="stat-badge">
                                        <span class="badge bg-info bg-opacity-10 text-info">Verified</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Division Chart -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h6 class="mb-0">
                            <i class="bi bi-building me-2"></i><span id="divisionChartTitle">Count of Initiative by Divisions</span>
                        </h6>
                        <nav id="divisionBreadcrumb" aria-label="breadcrumb" style="display: none;">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    <a href="#" id="breadcrumbDivisions" class="text-decoration-none">Initiative</a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page" id="breadcrumbCurrentDivision"></li>
                            </ol>
                        </nav>
                    </div>
                    <div class="card-body">
                        <canvas id="divisionChart" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- All Departments Chart -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-diagram-3 me-2"></i>Count of Initiative by Departments
                        </h6>
                    </div>
                    <div class="card-body">
                        <canvas id="allDepartmentsChart" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Initiative by Stage and Division Chart -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-bar-chart-steps me-2"></i>Initiative by Stage and Division
                        </h6>
                    </div>
                    <div class="card-body">
                        <canvas id="stageByDivisionChart" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- WL Chart -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-person-badge me-2"></i>Ideas by Workstream Leader
                        </h6>
                    </div>
                    <div class="card-body">
                        <canvas id="wlChart" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ideas List Table Section -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-table me-2"></i>Ideas List
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive-custom">
                            <table class="table table-hover align-middle ideas-table" id="ideasTable">
                                <thead class="table-light">
                                    <tr>
                                        <th>Idea ID</th>
                                        <th style="min-width: 150px;">Status</th>
                                        <th>Initiator B/N</th>
                                        <th style="min-width: 150px;">Initiator Name</th>
                                        <th style="min-width: 200px;">Initiator Division</th>
                                        <th style="min-width: 200px;">Implement on Division</th>
                                        <th style="min-width: 200px;">Implement on Department</th>
                                        <th style="min-width: 250px;">Idea Title</th>
                                        <th>Current Stage</th>
                                        <th style="min-width: 120px;">Submission Date</th>
                                        <th>Last Updated (Days)</th>
                                        <th style="min-width: 150px;">Idea Flow Validated</th>
                                    </tr>
                                </thead>
                                <tbody id="ideasTableBody">
                                    <tr>
                                        <td colspan="12" class="text-center">
                                            <div class="spinner-border spinner-border-sm text-primary" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            Loading ideas...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination Container -->
                        <div id="ideasPaginationContainer" class="pagination-container-single-row" style="display: none;">
                            <div class="pagination-info">
                                <i class="bi bi-info-circle text-primary me-1"></i>
                                <span class="text-muted"></span>
                            </div>

                            <div class="pagination-controls">
                                <div class="page-size-selector">
                                    <label class="form-label text-muted small mb-0 me-2">Ideas per page:</label>
                                    <select id="ideasPageSize" class="form-select form-select-sm" style="width: auto;">
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>

                                <nav aria-label="Page navigation" class="pagination-navigation">
                                    <ul class="pagination pagination-sm mb-0">
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Team Role & Idea Cost Saving Tables Section -->
        <div class="row g-4 mb-4">
            <!-- Team Role Table -->
            <div class="col-lg-5">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-people-fill me-2"></i>Team Role
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive-custom">
                            <table class="table table-hover align-middle team-role-table" id="teamRoleTable">
                                <thead class="table-light">
                                    <tr>
                                        <th>Employee BN</th>
                                        <th>Team Role</th>
                                        <th>Idea ID</th>
                                    </tr>
                                </thead>
                                <tbody id="teamRoleTableBody">
                                    <tr>
                                        <td colspan="3" class="text-center">
                                            <div class="spinner-border spinner-border-sm text-primary" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            Loading team roles...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination Container -->
                        <div id="teamRolePaginationContainer" class="pagination-container-single-row" style="display: none;">
                            <div class="pagination-info">
                                <i class="bi bi-info-circle text-primary me-1"></i>
                                <span class="text-muted"></span>
                            </div>

                            <div class="pagination-controls">
                                <div class="page-size-selector">
                                    <label class="form-label text-muted small mb-0 me-2">Items per page:</label>
                                    <select id="teamRolePageSize" class="form-select form-select-sm" style="width: auto;">
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>

                                <nav aria-label="Page navigation" class="pagination-navigation">
                                    <ul class="pagination pagination-sm mb-0">
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Idea Cost Saving Table -->
            <div class="col-lg-7">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-cash-coin me-2"></i>Idea Cost Saving
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive-custom">
                            <table class="table table-hover align-middle idea-cost-saving-table" id="ideaCostSavingTable">
                                <thead class="table-light">
                                    <tr>
                                        <th>Idea Id</th>
                                        <th>SavingCostValidated</th>
                                        <th>Idea Category</th>
                                        <th>Current Stage</th>
                                        <th>ideaFlowValidated</th>
                                    </tr>
                                </thead>
                                <tbody id="ideaCostSavingTableBody">
                                    <tr>
                                        <td colspan="5" class="text-center">
                                            <div class="spinner-border spinner-border-sm text-primary" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            Loading idea cost saving data...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination Container -->
                        <div id="ideaCostSavingPaginationContainer" class="pagination-container-single-row" style="display: none;">
                            <div class="pagination-info">
                                <i class="bi bi-info-circle text-primary me-1"></i>
                                <span class="text-muted"></span>
                            </div>

                            <div class="pagination-controls">
                                <div class="page-size-selector">
                                    <label class="form-label text-muted small mb-0 me-2">Items per page:</label>
                                    <select id="ideaCostSavingPageSize" class="form-select form-select-sm" style="width: auto;">
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>

                                <nav aria-label="Page navigation" class="pagination-navigation">
                                    <ul class="pagination pagination-sm mb-0">
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Approval History Table Section -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-clock-history me-2"></i>Approval History for IdeKU
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive-custom">
                            <table class="table table-hover align-middle approval-history-table" id="approvalHistoryTable">
                                <thead class="table-light">
                                    <tr>
                                        <th>Idea Id</th>
                                        <th>Approval ID</th>
                                        <th>Idea Status</th>
                                        <th>Current Stage</th>
                                        <th>Stage Name</th>
                                        <th>Approval Date</th>
                                        <th>Approver</th>
                                        <th>Latest Update Date</th>
                                        <th>Last Updated (Days)</th>
                                        <th>Implemented Division</th>
                                        <th>Implemented Department</th>
                                    </tr>
                                </thead>
                                <tbody id="approvalHistoryTableBody">
                                    <tr>
                                        <td colspan="11" class="text-center">
                                            <div class="spinner-border spinner-border-sm text-primary" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            Loading approval history...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination Container -->
                        <div id="approvalHistoryPaginationContainer" class="pagination-container-single-row" style="display: none;">
                            <div class="pagination-info">
                                <i class="bi bi-info-circle text-primary me-1"></i>
                                <span class="text-muted"></span>
                            </div>

                            <div class="pagination-controls">
                                <div class="page-size-selector">
                                    <label class="form-label text-muted small mb-0 me-2">Items per page:</label>
                                    <select id="approvalHistoryPageSize" class="form-select form-select-sm" style="width: auto;">
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>

                                <nav aria-label="Page navigation" class="pagination-navigation">
                                    <ul class="pagination pagination-sm mb-0">
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-danger">
            <i class="bi bi-exclamation-triangle me-2"></i>
            Unable to load dashboard data. Please refresh the page.
        </div>
    }
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="~/js/pages/dashboard.js" asp-append-version="true"></script>
}
