@model Ideku.Models.Entities.Idea

@if (!string.IsNullOrEmpty(Model.AttachmentFiles))
{
    @foreach (var file in Model.AttachmentFiles.Split(';', StringSplitOptions.RemoveEmptyEntries))
    {
        var filename = System.IO.Path.GetFileName(file);
        var viewUrl = $"/attached/view/{Model.Id}/{Uri.EscapeDataString(filename)}";
        var downloadUrl = $"/attached/download/{Model.Id}/{Uri.EscapeDataString(filename)}";

        <div class="attachment-item d-flex justify-content-between align-items-center mb-2">
            <span class="filename text-truncate me-2" title="@filename">
                <i class="bi bi-paperclip me-1"></i>@filename
            </span>
            <div class="attachment-actions">
                <button type="button"
                        class="btn btn-sm btn-outline-secondary view-attachment-btn"
                        data-filename="@filename"
                        data-view-url="@viewUrl"
                        data-download-url="@downloadUrl"
                        title="View @filename">
                    <i class="bi bi-eye"></i>
                </button>
                <a href="@downloadUrl"
                   class="btn btn-sm btn-outline-secondary ms-1"
                   title="Download @filename">
                    <i class="bi bi-download"></i>
                </a>
            </div>
        </div>
    }
}
else
{
    <div class="text-center text-muted py-4">
        <i class="bi bi-paperclip-slash" style="font-size: 2rem; opacity: 0.5;"></i>
        <p class="mt-2 mb-0">No attachments available</p>
    </div>
}